# 牌の記述

 m\*:マンズの*
 p\*:筒子の*
 s\*:ソウズの*
 (e,s,w,n):(東、南、西、北)
 haku:白
hatsu:發
chun:中

---

*には1~9までの数字が入る



# API

## エンドポイント

### http://t_kawa:8080/api/v1/detection

- 牌を検出する
- 形式
  - HTTPメソッド:POST
  - request内容:image(ロンした形)

参考画像

![mahjongyaku6](https://user-images.githubusercontent.com/26706103/39664511-34a62df8-50bf-11e8-810d-15e9c8db15c4.jpg)



response内容例
~~~json
{"pis": [{"hatsu": [0.9443261623382568, 0.885155200958252, 1.0, 0.9668492078781128, 0.9989991784095764]}, {"s1": [0.5105834603309631, 0.8831236362457275, 0.5721703171730042, 0.9696668386459351, 0.997262716293335]}, {"s4": [0.3231615722179413, 0.8854721784591675, 0.38519981503486633, 0.9683240652084351, 0.9962512850761414]}, {"p4": [0.635847806930542, 0.88599693775177, 0.6967763900756836, 0.9691020250320435, 0.9940372705459595]}, {"s6": [0.576220691204071, 0.8850948810577393, 0.6364890933036804, 0.9626741409301758, 0.9926861524581909]}, {"p6": [0.7003210783004761, 0.8853741884231567, 0.762068510055542, 0.9672133922576904, 0.9854868650436401]}, {"haku": [0.1347847580909729, 0.8846403956413269, 0.19850048422813416, 0.9663597941398621, 0.982799232006073]}, {"s2": [0.19977118074893951, 0.8849960565567017, 0.25998181104660034, 0.9642751216888428, 0.9816431403160095]}, {"p6": [0.8863188624382019, 0.8842339515686035, 0.9464882016181946, 0.9646909236907959, 0.9564278721809387]}, {"p8": [0.7609726190567017, 0.876449704170227, 0.823549747467041, 0.9607722759246826, 0.9172372817993164]}, {"p1": [0.26350435614585876, 0.8850215077400208, 0.32111355662345886, 0.9661094546318054, 0.6761854290962219]}], 
"image_id": 1}
~~~

response構造

~~~json
{
 "pis":[{"牌の名前":[x座標の最小値, y座標の最小値, x座標の最高値, y座標の最高値, 認識の確率値],...},
 "image_id":画像のid番号(修正が必要な場合にこのidを使ってどの画像が間違えていたか修正)
 }
~~~



# 現状の課題

1. 牌の認識精度
   - 訓練画像のバリエーションを増やす
     - ノイズを加える
     - 3Dモデル
   - 横向きの認識
2. ポン・チー・カンをどうするか
3. 点計算
4. ミスを修正して学習